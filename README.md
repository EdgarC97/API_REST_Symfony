# User Management RESTful API with Symfony

This is a basic but professionally structured RESTful API built with Symfony. It allows for user management (CRUD operations) and profile image upload, returning consistent JSON responses. Designed with clean architecture principles and scalability in mind.

---

## 📦 Features

- Symfony 6.x based REST API
- CRUD for User entity
- Upload and store profile images
- JSON responses throughout
- Clean code and service-based architecture

---

## ✅ Requirements

- PHP >= 8.3
- Composer
- Symfony CLI (recommended)
- PostgreSQL (Clever Cloud or local)

---

## 🚀 Installation

```bash
# Clone the repository
git clone https://github.com/EdgarC97/API_REST_Symfony.git
cd api_users

# Install dependencies
composer install

# Copy env and configure your database
cp .env .env.local
# Set DATABASE_URL in .env.local, example:
# DATABASE_URL="postgresql://user:pass@host:port/dbname?serverVersion=15&charset=utf8"

# Create and migrate the database
php bin/console doctrine:database:create # (if permissions allow)
php bin/console doctrine:migrations:migrate

# Start the server
symfony server:start
```

---

## 🔧 Entity Structure

```php
User {
  id: int (autogenerated)
  firstName: string (required)
  lastName: string (required, unique)
  profileImage: string|null (path to uploaded image)
}
```

---

## 🔁 API Endpoints

### Users

| Method | Endpoint                     | Description                |
|--------|------------------------------|----------------------------|
| GET    | /api/users                   | List all users             |
| GET    | /api/users/{id}             | Get user by ID             |
| POST   | /api/users                  | Create new user            |
| PUT    | /api/users/{id}             | Update user (full)         |
| PATCH  | /api/users/{id}             | Update user (partial)      |
| DELETE | /api/users/{id}             | Delete user                |

### Upload Profile Image

| Method | Endpoint                                | Description                  |
|--------|------------------------------------------|------------------------------|
| POST   | /api/users/{id}/upload-image            | Upload profile image for user|

---

## 🖼️ Uploading Images

- Use `multipart/form-data`
- Key: `image`
- Value: File (e.g., JPG, PNG)

**Example (Postman):**

- Method: POST
- URL: http://localhost:8000/api/users/1/upload-image
- Body type: `form-data`
- Key: `image`, Value: (choose a file)

---

## 📂 Public File Access

Uploaded images are stored in:
```
/public/uploads/
```
And accessible via URL:
```
http://localhost:8000/uploads/filename.jpg
```

---

## 📌 Notes

- Uses `ImageUploaderService` service to handle image logic
- Controller stays clean and only orchestrates
- Error handling and validation are minimal but extendable
- Code follows clean and scalable Symfony conventions

---

## 📮 Postman Collection

Review the file UserManagementAPI.postman_collection, include examples of JSON bodies and file uploads.

---

## 🧠 Future Enhancements

- Add validation via `ValidatorComponent`
- Implement DTOs or Form Request objects
- Secure endpoints with JWT or token auth
- Add unit and integration tests

---

